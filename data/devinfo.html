
<!DOCTYPE html>
<html>
<head>
    <title id="devname">Page Title</title>
    <link rel='stylesheet' type='text/css' href='/css'>
    <meta http-equiv='content-type' content='text/html; charset=UTF-8'>
    <meta name=viewport content='width=device-width, initial-scale=1'>
    <style>
    /*// content += CSS();*/
    </style>
</head>
<body>
<script src='/js' type='text/javascript'></script>
<script>
    var devname;
    function loadValues(){
        //if(!running) return;
        var xh = new XMLHttpRequest();
        xh.onreadystatechange = function(){
        if (xh.readyState == 4){
            if(xh.status == 200) {
                var res = JSON.parse(xh.responseText);
                devname = res.devname;
                document.getElementById('devname').innerHTML = devname;
                document.getElementById('devname2').innerHTML = devname;
                document.getElementById('topinfos').innerHTML = res.crights + ", " + res.fversion + ", CQ : <data id='quality2'></data>%";
                document.getElementById('fversion').value = res.fversion;
                document.getElementById('license').value = res.license;
                document.getElementById('SdkVersion').value = res.SdkVersion;

                //document.getElementById('title2').innerHTML = devname;
                //temp.add(res.analog);
                //digi.add(res.gpio);
                //if(running) setTimeout(loadValues, reloadPeriod);
            } //else running = false;
        }
      };
      xh.open("GET", "/devinfo_data", true);
      xh.send(null);
    };

    window.onload = function () {
        console.log('Dokument geladen');
        loadValues();
    }
</script>
 
<h2>
    <div id="devname2"></div>
</h2>
<div id="topinfos"></div>
<hr align='left'>
 
<table>

<tr>
<td><h3>Firmware Information</h3></td>
<td></td>
<td></td>
</tr>
 
<tr>
<td>Firmware Version</td>
<td><input id='fversion' type='text' name='fwv' size='15' value=''></td>
<td></td>
</tr>

<tr>
<td>License Type</td>
<td><input id='license' type='text' name='lic' size='15' value=''></td>
<td></td>
</tr>
 
<tr>
<td><h3>ESP32 Informations</h3></td>
<td></td>
<td></td>
</tr>
 
<tr>
<td>SDK Version</td>
<td><input id='SdkVersion' type='text' name='sdk' size='15' value=''></td>
<td></td>
</tr>

<tr>
<td>ESP32 Chip ID</td>
<td><input type='text' name='cid' size='15' value='
 content += String(chipId);
'></td>
<td></td>
</tr>

<tr>
<td>ESP32 Speed</td>
<td><input type='text' name='spd' size='15' value='
 content += String(ESP.getCpuFreqMHz());
'></td>
<td>[MHz]</td>
</tr>

 // String(ESP.getFreeHeap());
<tr>
<td>Free Heap Size</td>
<td><input id='heapsize' type='text' name='heapsize' size='15' value='0'></td>
<td>[<data id='hunit'></data>]</td>
</tr>

<tr>
<td><h3>Network Parameter</h3></td>
<td></td>
<td></td>
</tr>

<tr>
<td>Hostname</td>
<td><input id='hostname' type='text' name='hostname' size='15' value='
 content += String(hname);
'></td>
<td></td>
</tr>

<tr>
<td>mDNS Name</td>
<td><input id='mdnsname' type='text' name='mdnsname' size='15' value='
 if(actconf.mDNS == 1){
  content += String(hname) + ".local";
 }
 else{
 not activ
 }
'></td>
<td></td>
</tr>
 
<tr>
<td>WLAN Server SSID</td>
<td><input id='sssid' type='text' name='sssid' size='15' value=' '></td>
<td></td>
</tr>

<tr>
<td>WLAN Server IP</td>
<td><input type='text' name='serverip' size='15' value='
 content += WiFi.softAPIP().toString();
'></td>
<td></td>
</tr>

<tr>
<td>Activ AP Channel</td>
<td><input type='text' name='apchannel' size='15' value='
 content += String(WiFi.channel());
'></td>
<td></td>
</tr>

<tr>
<td>WLAN Client SSID</td>
<td><input id='cssid' type='text' name='cssid' size='15' value=' '></td>
<td></td>
</tr>

<tr>
<td>WLAN Client IP</td>
<td><input type='text' name='clientip' size='15' value='
 content += WiFi.localIP().toString();
'></td>
<td></td>
</tr>

<tr>
<td>Client Field Strength</td>
<td><input id='strength' type='text' name='strength' size='15' value='0'></td>
<td>[<data id='sunit'></data>]</td>
</tr>
 
<tr>
<td>Connection Quality</td>
<td><input id='quality' type='text' name='quality' size='15' value='0'></td>
<td>[<data id='qunit'></data>]</td>
</tr>

<tr>
<td><h3>LoRa Parameter</h3></td>
<td></td>
<td></td>
</tr>

 content += F("<tr>
 content += F("<td>Device Address</td>
 content += F("<td><input type='text' required name='devaddr' size='15' value='
 String mystring = String(actconf.devaddr, HEX);
 mystring.toUpperCase();
 content += mystring;
 content += F("' maxlength='20'></td>
 content += F("<td></td>
 content += F("</tr>

<tr>
<td>Actual Channel</td>
<td><input id='actualch' type='text' name='actualch' size='15' value='0'></td>
<td></td>
</tr>

<tr>
<td>Actual SF</td>
<td><input id='actualsf' type='text' name='actualsf' size='15' value='0'></td>
<td></td>
</tr>

<tr>
<td>TX Interval</td>
<td><input id='tinterval' type='text' name='tinterval' size='15' value='0'></td>
<td>[s]</td>
</tr>

<tr>
<td>Time Slot</td>
<td><input id='slot' type='text' name='slot' size='15' value='0'></td>
<td></td>
</tr>

<tr>
<td>TX Counter</td>
<td><input id='counter' type='text' name='counter' size='15' value='0'></td>
<td></td>
</tr>
 
<tr>
<td><h3>Device Informations<br><blink><data id='info'></data></blink></h3></td>
<td></td>
<td></td>
</tr>
 
<tr>
<td>Latiitude</td>
<td><input id='lat' type='text' name='lat' size='15' value='0'></td>
<td>[dez]</td>
</tr>

<tr>
<td>Longitude</td>
<td><input id='lon' type='text' name='lon' size='15' value='0'></td>
<td>[dez]</td>
</tr>

<tr>
<td>Altiitude</td>
<td><input id='alt' type='text' name='alt' size='15' value='0'></td>
<td>[m]</td>
</tr>
 
<tr>
<td>Air Temperature</td>
<td><input id='airtemp' type='text' name='airtemp' size='15' value='0'></td>
<td>[<data id='atunit'></data>]</td>
</tr>

<tr>
<td>Air Pressure</td>
<td><input id='pressure' type='text' name='pressure' size='15' value='0'></td>
<td>[mbar]</td>
</tr>

<tr>
<td>Air Humidity</td>
<td><input id='humidity' type='text' name='humidity' size='15' value='0'></td>
<td>[%]</td>
</tr>

<tr>
<td>Dewpoint</td>
<td><input id='dewpoint' type='text' name='dewpoint' size='15' value='0'></td>
<td>[<data id='dpunit'></data>]</td>
</tr>

<tr>
<td>Battery Voltage</td>
<td><input id='voltage' type='text' name='voltage' size='15' value='0'></td>
<td>[V]</td>
</tr>

<tr>
<td>1Wire Temp</td>
<td><input id='1wtemp' type='text' name='1wtemp' size='15' value='0'></td>
<td>[<data id='1wunit'></data>]</td>
</tr>

<tr>
<td>Tank 1</td>
<td><input id='tank1' type='text' name='tank1' size='15' value='0'></td>
<td>[V]</td>
</tr>

<tr>
<td>Tank 2</td>
<td><input id='tank2' type='text' name='tank2' size='15' value='0'></td>
<td>[V]</td>
</tr>

<tr>
<td>Alarm</td>
<td><input id='alarm' type='text' name='alarm' size='15' value='0'></td>
<td>[bin]</td>
</tr>

<tr>
<td>Relay</td>
<td><input id='relay' type='text' name='relay' size='15' value='0'></td>
<td>[bin]</td>
</tr>

<tr>
<td>Relay Timer</td>
<td><input id='rtimer' type='text' name='rtimer' size='15' value='0'></td>
<td>[min]</td>
</tr>

<tr>
<td>BME280 Sensor</td>
<td><input id='bmeSensor' type='text' name='bmeSensor' size='15' value='0'></td>
<td>[bin]</td>
</tr>
 
</table>

<br>
<hr align='left'>
<br>
<form action='/'><button type='submit'>Back</button></form>
<br>
<br>
</body>
</html>


